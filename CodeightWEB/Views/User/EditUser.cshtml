@model BOL.dbContext.tbl_Users
@using BOL.Helper

@{
    ViewBag.Title = "EditUser";
}

<link href="~/Content/theme/css/select2.min.css" rel="stylesheet" />
<link href="~/Content/theme/css/select2-bootstrap4.min.css" rel="stylesheet" />

<style>
    #imageUpload {
        display: none;
    }

    #profileImage {
        cursor: pointer;
    }

    #profile-container {
        width: 150px;
        height: 150px;
        overflow: hidden;
        -webkit-border-radius: 50%;
        -moz-border-radius: 50%;
        -ms-border-radius: 50%;
        -o-border-radius: 50%;
        border-radius: 50%;
        border: 2px solid #cacaca;
    }

        #profile-container img {
            width: 150px;
            height: 150px;
        }
</style>

<!-- Main content -->
<div class="content pt-3">
    <div class="container-fluid px-4">
        <div class="row">

            <div class="col-md-12">

                <form id="myfrm" enctype="multipart/form-data">

                    <input id="txtUserId" value="@Model.UserId" type="hidden">
                    <input id="txtProfileImage" value="@Model.ProfileImage" type="hidden">

                    <div class="row mb-3 pb-3">
                        <div class="col-lg-2">
                            <div class="image_wrap">
                                @if (!String.IsNullOrEmpty(Model.ProfileImage))
                                {
                                    @*<div class="profile_img">
                                            <img disabled src="@Url.Content(TripleDESCryptography.Decrypt(Model.ProfileImage))" class="img-fluid" alt="">
                                        </div>*@
                                    <div id="profile-container">
                                        <image id="setImage" src="@Url.Content(TripleDESCryptography.Decrypt(Model.ProfileImage))" class="img-fluid" alt="" />
                                    </div>
                                }
                                else
                                {
                                    @*<div class="profile_img">
                                            <img disabled src="~/Content/theme/img/profile.png" class="img-fluid" alt="">
                                        </div>*@
                                    <div id="profile-container">
                                        <image id="setImage" src="~/Content/theme/img/profile.png" class="img-fluid" alt="" />
                                    </div>
                                }
                                <input disabled="disabled" id="imageUpload" type="file"
                                       name="imageUpload" placeholder="Photo" accept="image/*">

                           
                            </div>
                        </div>
                    </div>
                    <!-- /.row -->
                    <!-- row -->
                    <div class="profile-form mb-5">
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>First Name</label>
                                    <input disabled type="text" value="@Model.FirstName" class="form-control" placeholder="John" name="" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Last Name</label>
                                    <input disabled type="text" value="@Model.LastName" class="form-control" name="" placeholder="Smit" readonly>
                                </div>
                            </div>
                        </div>

                        @*<div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Specialty</label>
                                    <input disabled type="text" value="@Model.Specialty" class="form-control" name="">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Work At</label>
                                    <input disabled type="text" value="@Model.WorkAt" class="form-control" name="">
                                </div>
                            </div>
                        </div>*@

                        @*<div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label>Bio</label>
                                    <textarea id="txtBio" disabled class="form-control">@Model.Bio</textarea>
                                </div>
                            </div>
                        </div>*@

                        <div class="row">
                            @*<div class="col-md-6">
                                <div class="form-group">
                                    <label>Areas of Interests</label>
                                 


                                    <select disabled id="ddlAreaOfInterestTitle" class="select2bs4 select2-hidden-accessible form-control" multiple="multiple" style="width: 100%;" data-select2-id="23" tabindex="-1" aria-hidden="true">
                                        @{
                                            IEnumerable<OA.Data.Model.AreaOfInterest> lstAreaOfInterest = ViewBag.AreaOfInterestList;

                                            if (lstAreaOfInterest != null)
                                            {
                                                foreach (var item in lstAreaOfInterest)
                                                {
                                                    <option selected="selected" data-select2-id="@item.AreaOfInterestId" value="@item.AreaOfInterestId">@item.InterestTitle</option>
                                                }
                                            }



                                        }
                                    </select>

                                </div>
                            </div>*@
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input disabled value="@Model.Email" type="text" class="form-control" name="">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label>Address</label>
                                    <textarea id="txtAddress" disabled class="form-control">@Model.Address</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>City</label>
                                    <input disabled value="@Model.tbl_Cities.CityName" type="text" class="form-control" name="">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Country</label>
                                    <input disabled value="@Model.tbl_Cities.tbl_States.tbl_Countries.CountryName" type="text" class="form-control" name="">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>State</label>
                                    <input disabled value="@Model.tbl_Cities.tbl_States.StateName" type="text" class="form-control" name="">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Zip Code</label>
                                    <input disabled value="@Model.ZipCode" type="text" class="form-control" name="">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>User Status</label>
                                    <select id="ddlUserStatus" class="form-control">
                                        @if (Model.UserStatus == 1)
                                        {
                                            <option value="1" selected="selected">Verified</option>
                                            <option value="0">Unverified</option>
                                        }
                                        else
                                        {
                                            <option value="0" selected="selected">Unverified</option>
                                            <option value="1">Verified</option>
                                        }
                                        @*<option>Select</option>*@

                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Account Status</label>
                                    <select id="ddlIsActive" class="form-control">
                                        @if (Model.IsActive == true)
                                        {
                                            <option value="1" selected="selected">Active</option>
                                            <option value="0">Inactive</option>
                                        }
                                        else
                                        {
                                            <option value="0" selected="selected">Inactive</option>
                                            <option value="1">Active</option>
                                        }

                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="buttons-group text-center mt-4">
                            <a href="~/User/ManagemenListAndsearch" class="btn mr-2">Back</a>
                            @*<a href="#" class="btn flat-btn ml-2">Update</a>*@
                            <button id="btnSave" type="button" class="btn flat-btn ml-2">Update</button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
        <!-- /.row -->
    </div><!-- /.container-fluid -->
</div>
<!-- /.content -->
<script src="~/Content/theme/js/select2.full.min.js"></script>

<script type="text/javascript">

    $('#btnSave').click(function () {
        debugger;

        dataAccess.userService.EditUserStatus();

    });
    //Initialize Select2 Elements
    //Initialize Select2 Elements
    $('.select2bs4').select2({
        theme: 'bootstrap4'
    });
    //Initialize Select2 Elements
    $('.status').select2({
        theme: 'bootstrap4'
    });
    //Initialize Select2 Elements
    $('.language').select2({
        theme: 'bootstrap4'
    });
    //Initialize Select2 Elements
    $('.specialties').select2({
        theme: 'bootstrap4'
    });
    //Initialize Select2 Elements
    $('.diesease').select2({
        theme: 'bootstrap4'
    });



    $("#profileImage").click(function (e) {

        $("#imageUpload").click();
    });

    function fasterPreview(uploader) {
        //      debugger;
        if (uploader.files && uploader.files[0]) {
            //$('#setImage').attr('src',
            //    window.URL.createObjectURL(uploader.files[0]));

            var File = uploader.files;
            var reader = new FileReader();
            reader.readAsDataURL(File[0]);

            reader.onload = function (x) {
                var image = new Image;
                image.src = x.target.result;

                image.onload = function () {
                    //alert(1);
                    //debugger;
                    var width = this.width;
                    var height = this.height;
                    var type = File[0].type;

                    if ((width <= "100" && height <= "100") && (type == "image/png" || type == "image/jpg" || type == "image/jpeg")) {
                        $('#setImage').attr('src', x.target.result);
                    }
                    else {
                        swal("Warning! invalid image!", "size must be 100x100 or less then 100x100 and type:png/jpg/jpeg");
                        //alert(width + " " + height + " " + type);
                    }

                }



            }
        }
    }

    $("#imageUpload").change(function () {
        fasterPreview(this);
    });



</script>